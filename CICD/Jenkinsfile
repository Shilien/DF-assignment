pipeline {
    agent any

    environment {
        DOTNET_ROOT = "$HOME/.dotnet"
        PATH= "$PATH:$DOTNET_ROOT:$DOTNET_ROOT/tools"
    }

    triggers {
        pollSCM('H * * * *')
    }

    stages {
        stage('Dependencies') {
            steps {
                sh '''
                    wget https://dot.net/v1/dotnet-install.sh -O dotnet-install.sh && chmod +x ./dotnet-install.sh
                    bash dotnet-install.sh --version 6.0.129
                '''
            }
        }
        
        stage('Build') {
            steps {
                dir('CICD') {
                    sh '''
                        dotnet build
                    '''
                }
            }
        }
        // stage('Test') {
        //     steps {
        //         sh "dotnet test"
        //     }
        // }

        // stage('Deploy') {
        //     steps {
        //         sh "dotnet deploy"
        //     }
        // }
    }
}
